<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>D3-FORGE | Design, Development & Deploy</title>
  <meta name="description" content="D3-FORGE delivers AI, cloud, QA, and training solutions. Explore services, enroll in courses, and access our LMS." />
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/style.css" />
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Open+Sans:wght@400;600&display=swap&display=swap" rel="stylesheet" />
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17452355141"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'AW-17452355141');
  </script>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <a href="index.html" class="logo">D3-FORGE</a>
    <ul class="nav-links">
      <li><a href="index.html" class="active">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="services.html">Services</a></li>
      <li><a href="training.html">Training</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="#" data-lms-login-open aria-label="Login to Learning Management System">Login to LMS</a></li>
    </ul>
    <div class="hamburger">
      <ion-icon name="menu-outline"></ion-icon>
    </div>
  </nav>

  <!-- Mobile navigation -->
  <div class="mobile-nav">
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="services.html">Services</a>
    <a href="training.html">Training</a>
    <a href="contact.html">Contact</a>
    <a href="#" data-lms-login-open aria-label="Login to Learning Management System">Login to LMS</a>
  </div>

  <!-- Hero Section -->
  <header class="hero">
    <div class="container">
      <h1 class="fade-in">Design • Develop • Deploy</h1>
      <p class="fade-in" style="--delay:0.2s">Innovative software solutions & hands-on training for the next generation of tech leaders.</p>
      <a href="services.html" class="btn fade-in" style="--delay:0.4s">Explore our Services</a>
    </div>
  </header>

  <!-- Services, Training, Upcoming Courses … (UNCHANGED for brevity) -->

  <!-- LMS Embed -->
  <section class="section" id="lms-section">
    <div class="container">
      <section id="lms-embed-section" class="lms-hidden" aria-live="polite">
        <div class="lms-embed-toolbar">
          <strong>Learning Management System</strong>
          <div style="display:flex; gap:8px; align-items:center">
            <button type="button" id="lms-open-in-modal" class="lms-btn ghost" title="Open login / account">Account</button>
            <button type="button" id="lms-signout" class="lms-btn ghost">Sign out</button>
          </div>
        </div>
        <div class="lms-embed-wrap">
          <iframe id="lms-iframe" src="LMS_EMBED_URL" title="LMS"></iframe>
          <div id="lms-loading" role="status">Loading LMS...</div>
        </div>
      </section>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container footer-container">
      <!-- Company / Contact / Social unchanged -->
      <div class="footer-column">
        <h4>Follow Us</h4>
        <div class="social-icons">
          <a href="https://linkedin.com/company/d3-forge" aria-label="LinkedIn"><ion-icon name="logo-linkedin"></ion-icon></a>
          <a href="https://x.com/D3Forgetech" target="_blank" rel="noopener noreferrer" aria-label="X (formerly Twitter)">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M18.244 2h3.75l-8.18 9.34L22 22h-6.843l-5.373-7.212L3.6 22H-.154l8.586-9.8L0 2h6.843l4.87 6.47L18.244 2Zm-2.386 18h2.073L8.21 4H6.138l9.72 16Z"/>
            </svg>
          </a>
          <a href="https://github.com/D3Forgetech" aria-label="GitHub"><ion-icon name="logo-github"></ion-icon></a>
          <a href="https://www.youtube.com/@d3-forge" class="yt" target="_blank" rel="noopener noreferrer" aria-label="YouTube"><ion-icon name="logo-youtube"></ion-icon></a>
          <a href="https://www.instagram.com/d3.forge/" class="ig" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><ion-icon name="logo-instagram"></ion-icon></a>
        </div>
      </div>
    </div>
    <p class="copyright">© 2025 D3-FORGE. All Rights Reserved.</p>
  </footer>

  <!-- Floating WhatsApp -->
  <a class="whatsapp-floating"
   href="https://wa.me/918125352626?text=Hi%20D-3Forge%2C%20I%20have%20a%20question%20about%20your%20services."
   target="_blank" rel="noopener"
   aria-label="Chat on WhatsApp">
    <ion-icon name="logo-whatsapp"></ion-icon>
  </a>

  <!-- ====== MODALS (UPDATED SCRIPT BELOW) ====== -->

  <!-- Modals unchanged for brevity -->

  <!-- Scripts -->
  <script src="js/script.js"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <!-- Accessible Modal behavior with Focus Trap -->
  <script>
    (function () {
      let lastFocused;
      const focusableSelectors = 'a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])';

      const trapFocus = (modal) => {
        const focusables = modal.querySelectorAll(focusableSelectors);
        if (!focusables.length) return;
        const first = focusables[0], last = focusables[focusables.length - 1];
        modal.addEventListener('keydown', (e) => {
          if (e.key !== 'Tab') return;
          if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
          else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
        });
      };

      const openModal = (sel) => {
        document.querySelectorAll('.modal').forEach(m => m.setAttribute('aria-hidden', 'true'));
        const modal = document.querySelector(sel);
        if (!modal) return;
        lastFocused = document.activeElement;
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
        setTimeout(() => {
          const focusable = modal.querySelector(focusableSelectors);
          focusable?.focus();
        }, 0);
        trapFocus(modal);
      };

      const closeModal = (modal) => {
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        lastFocused?.focus();
      };

      document.querySelectorAll('[data-open-modal]').forEach(el => {
        el.addEventListener('click', (e) => { e.preventDefault(); openModal(el.getAttribute('data-open-modal')); });
        el.addEventListener('keydown', (e) => { if (['Enter',' '].includes(e.key)) { e.preventDefault(); el.click(); }});
      });

      document.querySelectorAll('[data-close-modal]').forEach(btn => {
        btn.addEventListener('click', () => closeModal(btn.closest('.modal')));
      });

      document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', e => { if (e.target === modal) closeModal(modal); });
      });

      document.addEventListener('keydown', e => {
        if (e.key === 'Escape') {
          document.querySelectorAll('.modal[aria-hidden="false"]').forEach(m => closeModal(m));
        }
      });
    })();
  </script>
</body>
</html>
