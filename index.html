<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>D3-FORGE | Design, Development & Deploy</title>

  <link rel="stylesheet" href="css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet" />

  <style>
    /* ============= Root + Helpers ============= */
    :root{
      --nav-h: 64px;
      --bg-dark: #0d2326;
      --brand: #01b8cf;
      --text: #0d2326;
      --card-dark: #171b1d;
    }
    html{
      /* when you jump to an anchor (#services), headings won't hide under the sticky nav */
      scroll-padding-top: calc(var(--nav-h) + 14px);
    }
    body{
      margin:0;
      font-family: "Open Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: #111;
      line-height: 1.6;
      /* leave space for sticky bar + safe area on iOS */
      padding-top: calc(var(--nav-h) + env(safe-area-inset-top, 0px));
      background:#f6f7f8;
    }
    .container{
      width: min(1200px, 100%);
      margin: 0 auto;
      padding: 0 16px;
    }
    /* ============= Sticky Navbar ============= */
    .navbar{
      position: sticky; /* stays visible but participates in layout (smoother than fixed) */
      top: 0;
      left: 0;
      right: 0;
      height: calc(var(--nav-h) + env(safe-area-inset-top, 0px));
      z-index: 2000;
      background:#fff;
      padding: env(safe-area-inset-top, 0px) 0 0 0; /* add safe area inside the bar */
      box-shadow: 0 2px 12px rgba(0,0,0,.06);
    }
    .navbar .inner{
      height: var(--nav-h);
      display:flex; align-items:center; justify-content:space-between;
      padding: 0 16px;
    }
    .brand{ display:flex; align-items:center; gap:.6rem; text-decoration:none; }
    .brand img{ height:36px; width:auto; display:block; border-radius:8px; }
    .brand .site-name{
      font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-weight:800; color:#0d2326; font-size:1.25rem; letter-spacing:.2px;
    }
    .nav-links{ display:flex; gap:1rem; list-style:none; margin:0; padding:0; align-items:center; }
    .nav-links a{ color:#0d2326; text-decoration:none; font-weight:600; padding:.35rem .2rem; }
    .nav-links a.active{ color:var(--brand); border-bottom:3px solid var(--brand); }

    /* ============= Free Course Banner (desktop only) ============= */
    .free-banner{ background: linear-gradient(135deg, var(--brand) 0%, var(--bg-dark) 100%); color:#fff; padding: 16px 0; }
    .free-banner .container{ display:grid; grid-template-columns:1fr auto; align-items:center; gap:1rem; }
    .badge-new{ display:inline-flex; align-items:center; gap:.4rem; font-weight:800; background:#fff; color:#0d2326; border-radius:999px; padding:.35rem .7rem; font-size:.8rem; }
    .free-banner h2{ margin:.25rem 0 0; font-size: clamp(1.15rem, 2.2vw, 1.5rem); font-weight:700; }
    .free-banner p{ margin:.25rem 0 0; opacity:.9; }
    .free-banner .actions{ display:flex; gap:.5rem; flex-wrap:wrap; }
    .free-banner .btn{ background:#fff; color:#0d2326; border-radius:10px; padding:.5rem .85rem; font-weight:700; border:0; cursor:pointer; }
    .free-banner .btn.ghost{ background:transparent; color:#fff; border:1px solid rgba(255,255,255,.7); }
    /* Hide banner entirely on phones */
    @media (max-width:768px){ .free-banner{ display:none !important; } }

    /* ============= Hero ============= */
    .hero{
      position:relative;
      background: radial-gradient(1200px 1200px at 30% 30%, #0a2f44 0%, #0a2330 35%, #081e28 55%, #08161b 100%);
      color:#fff;
      padding: 64px 0;
    }
    .hero h1{
      font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-weight:800;
      margin:0 0 12px 0;
      line-height:1.1;
      font-size: clamp(1.8rem, 5vw, 3.2rem);
      letter-spacing:.2px;
    }
    .hero p{
      max-width: 58ch;
      font-size: clamp(1rem, 1.8vw, 1.2rem);
      opacity:.95;
      margin: 0 0 18px 0;
    }
    .hero .btn{
      display:inline-block; background:#0aa8c0; color:#fff; text-decoration:none; font-weight:700;
      border-radius:12px; padding: 14px 22px;
    }

    /* ============= Sections ============= */
    .section{ padding: 56px 0; background:#f6f7f8; }
    .section-dark{ background: var(--bg-dark); color:#fff; }
    .section-title{
      font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-weight:800;
      font-size: clamp(1.6rem, 4.2vw, 2.4rem);
      margin: 0 0 10px 0;
      line-height:1.15;
      color: inherit;
    }
    .section-subtitle{
      font-size: clamp(1rem, 2vw, 1.125rem);
      opacity:.9;
      max-width: 68ch;
    }

    /* ============= Cards ============= */
    .cards{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; margin-top: 18px; }
    .card{
      background: #101416;
      color: #e9f0f3;
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 10px 24px rgba(0,0,0,.15);
    }
    .card h3{
      font-family:Poppins, system-ui; font-weight:800; margin: 0 0 6px 0; font-size: clamp(1.15rem, 2.6vw, 1.5rem);
    }
    .card p{ margin:0; opacity:.9; }

    /* ============= Course Cards + Pills ============= */
    .course-cards{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:1.25rem; }
    .course-card{
      background:#01b8cf; color:#0d2326; border-radius:14px; padding:1.25rem 1.25rem 1rem;
      box-shadow:0 8px 28px rgba(0,0,0,.18); border:1px solid rgba(255,255,255,.15);
      transition:transform .18s ease, box-shadow .18s ease; cursor:pointer;
    }
    .course-card:hover{ transform:translateY(-3px); box-shadow:0 14px 34px rgba(0,0,0,.22); }
    .course-card h3{ color:#fff; margin:.5rem 0 .25rem; font-weight:700; }
    .course-card p{ color:#e9feff; margin:0 0 .75rem; }
    .course-icon{ font-size:34px; color:#083a41; }
    .course-actions{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
    .btn-light{ background:#fff; color:#0d2326; border:none; padding:.55rem .85rem; border-radius:10px; font-weight:600; }
    .btn-ghost{ background:transparent; border:1px solid rgba(255,255,255,.7); color:#fff; padding:.5rem .85rem; border-radius:10px; }
    .pill-muted{ background:rgba(255,255,255,.2); color:#fff; padding:.35rem .6rem; border-radius:999px; font-size:.8rem; }
    .pill-new{ background:#fff; color:#0d2326; font-weight:700; padding:.3rem .55rem; border-radius:999px; font-size:.75rem; }

    /* ============= Modals ============= */
    .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.55); z-index:9999; padding:1rem; }
    .modal[aria-hidden="false"]{ display:flex; }
    .modal-card{ width:min(960px,92vw); max-height:90vh; overflow:auto; background:#fff; color:#111; border-radius:18px; box-shadow:0 24px 64px rgba(0,0,0,.25); }
    .modal-header{ display:flex; align-items:center; justify-content:space-between; padding:1rem 1.25rem; border-bottom:1px solid rgba(0,0,0,.08); position:sticky; top:0; background:#fff; border-top-left-radius:18px; border-top-right-radius:18px; }
    .modal-body{ padding:1.25rem; }
    .modal-actions{ display:flex; gap:.75rem; padding: 0 1.25rem 1.25rem; flex-wrap:wrap; }
    .close-btn{ background:transparent; border:none; font-size:1.6rem; line-height:1; cursor:pointer; color:#333; }
    .btn-dark{ background: var(--bg-dark); color:#fff; border-radius:10px; padding:.55rem .85rem; }

    /* ============= Footer ============= */
    footer{ background:#0f1619; color:#dbe5e8; padding-top: 24px; }
    footer .footer-container{ display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:20px; }
    footer a{ color:#dbe5e8; text-decoration:none; }
    .copyright{ text-align:center; opacity:.8; padding: 16px 0 24px 0; margin:0; }

    /* ============= Floating WhatsApp position fix ============= */
    .whatsapp-floating{
      position: fixed; right: 16px; bottom: max(16px, env(safe-area-inset-bottom, 16px));
      width:56px; height:56px; display:grid; place-items:center; background:#25D366; color:#fff; border-radius:50%;
      box-shadow: 0 10px 24px rgba(0,0,0,.25); z-index: 1200;
    }
    .whatsapp-floating ion-icon{ font-size:28px; }

    /* ============= Mobile tweaks ============= */
    @media (max-width:768px){
      .brand img{ height:32px; }
      .brand .site-name{ font-size:1.1rem; }
      .cards .card{ padding: 18px; }
      .hero{ padding: 48px 0; }
      .section{ padding: 44px 0; }
    }
  </style>
</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar" role="navigation" aria-label="Primary">
    <div class="inner">
      <a href="index.html" class="brand">
        <img src="assets/IMG-20250811-WA0109.jpg" alt="D-3Forge Logo">
        <span class="site-name">D-3Forge</span>
      </a>
      <ul class="nav-links">
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="training.html">Training</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="#" data-lms-login-open>Login to LMS</a></li>
      </ul>
    </div>
  </nav>

  <!-- DESKTOP-ONLY: Free Course Banner -->
  <section class="free-banner" aria-label="Free Course: Agentic AI">
    <div class="container">
      <div>
        <span class="badge-new" aria-label="New course">NEW</span>
        <h2>Free Course: <span style="text-decoration: underline;">Agentic AI</span></h2>
        <p>Hands-on, 30-day pathway from zero → building real, tool-using LLM agents.</p>
      </div>
      <div class="actions">
        <button class="btn" data-open-modal="#agentic-modal">View Syllabus</button>
        <a class="btn ghost"
           href="https://wa.me/918125352626?text=Hi%20D3-FORGE%2C%20I%20want%20to%20enroll%20in%20the%20Free%20Agentic%20AI%20course."
           target="_blank" rel="noopener" data-modal-exempt>Enroll Free</a>
      </div>
    </div>
  </section>

  <!-- HERO -->
  <header class="hero">
    <div class="container">
      <h1>Design • Develop • Deploy</h1>
      <p>Innovative software solutions & hands-on training for the next generation of tech leaders.</p>
      <a href="services.html" class="btn">Explore our Services</a>
    </div>
  </header>

  <!-- SERVICES -->
  <section class="section" id="services-overview">
    <div class="container">
      <h2 class="section-title">Our Solutions</h2>
      <p class="section-subtitle">From artificial intelligence to comprehensive quality assurance, D3-FORGE delivers end-to-end software services that power innovation.</p>

      <div class="cards">
        <article class="card">
          <h3>AI & Machine Learning</h3>
          <p>Develop intelligent systems that learn from data, automate decisions and deliver predictive insights.</p>
        </article>

        <article class="card">
          <h3>Web & Mobile Development</h3>
          <p>Create responsive websites and mobile apps with modern frameworks that scale seamlessly across devices.</p>
        </article>

        <article class="card">
          <h3>Cloud Solutions</h3>
          <p>Leverage the power of the cloud to build, deploy and manage applications with high availability and security.</p>
        </article>

        <article class="card">
          <h3>QA & Testing</h3>
          <p>Ensure quality through automated and manual testing strategies, safeguarding user experience and reliability.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- TRAINING (light intro strip kept simple) -->
  <section class="section" id="training-overview" style="background:#eef3f5;">
    <div class="container">
      <h2 class="section-title" style="color:#0d2326">Empowering Learners</h2>
      <p class="section-subtitle" style="color:#33434a">Our student‑centred training programmes focus on practical experience, modular curricula and industry‑relevant skills.</p>
    </div>
  </section>

  <!-- UPCOMING COURSES -->
  <section class="section section-dark" id="upcoming-courses">
    <div class="container">
      <h2 class="section-title">Upcoming Courses</h2>
      <p class="section-subtitle" style="color:#cde9e6">Reserve your spot in our next industry-ready cohorts.</p>

      <div class="course-cards">
        <!-- Agentic AI — Free -->
        <article class="course-card" role="button" tabindex="0"
                 aria-controls="agentic-modal" aria-haspopup="dialog"
                 data-open-modal="#agentic-modal">
          <div class="course-icon"><ion-icon name="construct-outline"></ion-icon></div>
          <h3>Agentic AI (Free)</h3>
          <p>30-day, project-based intro to building LLM agents: tools, memory, planning, and deployment.</p>
          <div class="course-actions">
            <span class="pill-new" aria-hidden="true">NEW</span>
            <span class="pill-muted">Free</span>
            <button class="btn btn-light" data-open-modal="#agentic-modal">View Syllabus</button>
            <a class="btn btn-ghost" href="training.html" data-modal-exempt>Details</a>
          </div>
        </article>

        <!-- GenAI for PMs -->
        <article class="course-card" role="button" tabindex="0"
                 aria-controls="genai-modal" aria-haspopup="dialog"
                 data-open-modal="#genai-modal">
          <div class="course-icon"><ion-icon name="rocket-outline"></ion-icon></div>
          <h3>Generative AI for Product Managers</h3>
          <p>8-week end-to-end program: Strategy → Architecture → Data → Agents → MLOps → Governance → Stakeholder Alignment → Capstone.</p>
          <div class="course-actions">
            <button class="btn btn-light" data-open-modal="#genai-modal">View Syllabus</button>
            <a class="btn btn-ghost"
               href="https://raw.githubusercontent.com/Ajay-Sai-Kiran/website/main/assets/AI%20for%20Product%20Managers%20(1).pdf"
               download="AI-for-Product-Managers.pdf" rel="noopener" data-modal-exempt>Download PDF</a>
            <a class="btn btn-ghost" href="training.html" data-modal-exempt>Details</a>
          </div>
        </article>

        <article class="course-card" aria-disabled="true">
          <div class="course-icon"><ion-icon name="code-slash-outline"></ion-icon></div>
          <h3>SAP PP–PM–QM</h3>
          <p>Course designed for PP/QM/PM consultants, power users, manufacturing/quality/maintenance leads</p>
          <div class="course-actions"><span class="pill-muted">Coming Soon</span></div>
        </article>

        <article class="course-card" aria-disabled="true">
          <div class="course-icon"><ion-icon name="shield-checkmark-outline"></ion-icon></div>
          <h3>AI Ethics Fundamentals</h3>
          <p>Bias mitigation, explainability, governance and compliance in production AI systems.</p>
          <div class="course-actions"><span class="pill-muted">Coming Soon</span></div>
        </article>
      </div>
    </div>
  </section>

  <!-- LMS EMBED -->
  <section class="section" id="lms-section">
    <div class="container">
      <section id="lms-embed-section" class="lms-hidden" aria-live="polite">
        <div class="lms-embed-toolbar">
          <strong>Learning Management System</strong>
          <div style="display:flex; gap:8px; align-items:center">
            <button type="button" id="lms-open-in-modal" class="lms-btn ghost" title="Open login / account">Account</button>
            <button type="button" id="lms-signout" class="lms-btn ghost">Sign out</button>
          </div>
        </div>
        <div class="lms-embed-wrap">
          <iframe id="lms-iframe" src="LMS_EMBED_URL" title="LMS"></iframe>
        </div>
      </section>
    </div>
  </section>

  <!-- CTA -->
  <section class="section" style="background: var(--brand); color: #fff;">
    <div class="container">
      <h2 class="section-title" style="color:#fff">Ready to build your future?</h2>
      <p class="section-subtitle" style="color:#f3fcff">Partner with D3-FORGE for cutting-edge software solutions and transformative training.</p>
      <div style="text-align:center; margin-top:10px;">
        <a href="contact.html" class="btn" style="background: var(--bg-dark); color:#fff; text-decoration:none; border-radius:10px; padding:12px 18px; display:inline-block;">Get in Touch</a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="container footer-container">
      <div class="footer-column">
        <h4>Company</h4>
        <ul>
          <li><a href="about.html">About Us</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="training.html">Training</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>Contact</h4>
        <ul>
          <li><a href="#">Hyderabad, Telangana, India</a></li>
          <li><a href="mailto:info@d-3forge.com">info@d-3forge.com</a></li>
          <li><a href="tel:+918125352626">+918125352626</a></li>
          <li><a href="tel:+918125352727">+918125352727</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>Follow Us</h4>
        <div class="social-icons">
          <a href="#"><ion-icon name="logo-linkedin"></ion-icon></a>
          <a href="#"><ion-icon name="logo-twitter"></ion-icon></a>
          <a href="#"><ion-icon name="logo-github"></ion-icon></a>
          <a href="https://www.instagram.com/d3.forge/" class="ig" target="_blank" rel="noopener" aria-label="Instagram"><ion-icon name="logo-instagram"></ion-icon></a>
        </div>
      </div>
    </div>
    <p class="copyright">© 2025 D3-FORGE. All Rights Reserved.</p>
  </footer>

  <!-- Floating WhatsApp -->
  <a class="whatsapp-floating"
     href="whatsapp://send?phone=918125352626&text=Hi%20D-3Forge%2C%20I%20have%20a%20question%20about%20your%20services."
     target="_blank" rel="noopener" aria-label="Chat on WhatsApp">
    <ion-icon name="logo-whatsapp"></ion-icon>
  </a>

  <!-- ========== MODALS ========== -->
  <div id="agentic-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="agentic-title">
    <div class="modal-card" role="document">
      <header class="modal-header">
        <h3 id="agentic-title">Agentic AI — 30-Day Free Course (Beginner → Builder)</h3>
        <button class="close-btn" aria-label="Close syllabus" data-close-modal>&times;</button>
      </header>
      <div class="modal-body">
        <p><strong>Outcome:</strong> Build and deploy your own tool-using LLM agent with planning, memory, and a small capstone.</p>
        <ol class="syllabus">
          <li><strong>Days 1–3:</strong> Foundations — what is an agent; LLM basics; Python setup; APIs & JSON.</li>
          <li><strong>Days 4–6:</strong> Prompting & Tool Use — function calling; ReAct loop; calculator + web search tool.</li>
          <li><strong>Days 7–9:</strong> Memory — embeddings; vector store; doc retrieval.</li>
          <li><strong>Days 10–12:</strong> Planning — ReAct/Reflexion; task decomposition; research summarizer agent.</li>
          <li><strong>Days 13–15:</strong> Integrations — files; 3rd‑party APIs (news/Slack/Notion); scheduling.</li>
          <li><strong>Days 16–18:</strong> Reliability — guardrails; retries; logging; quick evals.</li>
          <li><strong>Days 19–21:</strong> Multi-Agent — coordinator/worker; handoffs; recovery.</li>
          <li><strong>Days 22–24:</strong> Performance — async/streaming; caching; memory persistence.</li>
          <li><strong>Days 25–27:</strong> UI & Deploy — FastAPI/Streamlit; Docker; small cloud host.</li>
          <li><strong>Days 28–30:</strong> Capstone — ship a working agent; README + demo.</li>
        </ol>
      </div>
      <div class="modal-actions">
        <a class="btn" href="#" download="Agentic-AI-30-Day-Syllabus.txt" onclick="
          const blob = new Blob([document.querySelector('#agentic-modal .modal-body').innerText], {type:'text/plain'});
          const url = URL.createObjectURL(blob); this.href = url;
        ">Download Syllabus (TXT)</a>
        <a class="btn btn-dark"
           href="https://wa.me/918125352626?text=Hi%20D3-FORGE%2C%20I%20want%20to%20enroll%20in%20the%20Free%20Agentic%20AI%20course."
           target="_blank" rel="noopener" data-modal-exempt>Enroll Free</a>
      </div>
    </div>
  </div>

  <div id="genai-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="genai-title">
    <div class="modal-card" role="document">
      <header class="modal-header">
        <h3 id="genai-title">Generative AI for Product Managers — 8-Week Syllabus</h3>
        <button class="close-btn" aria-label="Close syllabus" data-close-modal>&times;</button>
      </header>
      <div class="modal-body">
        <p><strong>Outcome:</strong> Launch AI-powered products with strategic clarity, technical depth, and governance alignment.</p>
        <ol class="syllabus">
          <li><strong>Week 1:</strong> Strategy & OKRs.</li>
          <li><strong>Week 2:</strong> Architecture — RAG, agentic systems, transformers, sizing.</li>
          <li><strong>Week 3:</strong> Data & Retrieval Pipeline — ingestion, embeddings, vector DBs.</li>
          <li><strong>Week 4:</strong> Agentic Workflow & Multi-Agent Design.</li>
          <li><strong>Week 5:</strong> MLOps, Deployment & Monitoring.</li>
          <li><strong>Week 6:</strong> Ethics, Governance & Reliability.</li>
          <li><strong>Week 7:</strong> Stakeholder Alignment & Storytelling.</li>
          <li><strong>Week 8:</strong> Capstone — end-to-end ADRs & presentation.</li>
        </ol>
      </div>
      <div class="modal-actions">
        <a class="btn" href="https://raw.githubusercontent.com/Ajay-Sai-Kiran/website/main/assets/AI%20for%20Product%20Managers%20(1).pdf" download="AI-for-Product-Managers.pdf" rel="noopener">Download Syllabus (PDF)</a>
        <a class="btn btn-dark" href="contact.html">Register Interest</a>
      </div>
    </div>
  </div>

  <div id="sap-pppmqm-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="sap-pppmqm-title">
    <div class="modal-card" role="document">
      <header class="modal-header">
        <h3 id="sap-pppmqm-title">SAP PP–PM–QM — 8-Week Syllabus</h3>
        <button class="close-btn" aria-label="Close syllabus" data-close-modal>&times;</button>
      </header>
      <div class="modal-body">
        <p><strong>Outcome:</strong> Deliver integrated PP, QM and PM in SAP S/4HANA with hands-on confidence.</p>
        <ol class="syllabus">
          <li>Week 1: S/4HANA overview, org structure, roles & Fiori.</li>
          <li>Week 2: PP Master Data.</li>
          <li>Week 3: Demand & MRP.</li>
          <li>Week 4: Execution & Capacity.</li>
          <li>Week 5: QM Foundations & Procurement.</li>
          <li>Week 6: QM in Production & Sales.</li>
          <li>Week 7: PM/EAM — notifications & orders, maintenance plans.</li>
          <li>Week 8: Capstone — end-to-end scenario; ADRs.</li>
        </ol>
      </div>
      <div class="modal-actions">
        <a class="btn" href="assets/syllabus-sap-pp-pm-qm.pdf" download>Download Syllabus (PDF)</a>
        <a class="btn btn-dark" href="contact.html">Register Interest</a>
      </div>
    </div>
  </div>

  <!-- Core scripts -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <!-- Modal wiring -->
  <script>
    (function () {
      document.querySelectorAll('[data-open-modal]').forEach(el => {
        el.addEventListener('click', e => {
          const sel = el.getAttribute('data-open-modal');
          const modal = document.querySelector(sel);
          if (!modal) return;
          modal.setAttribute('aria-hidden', 'false');
          document.body.style.overflow = 'hidden';
          e.preventDefault();
        });
        el.addEventListener('keydown', e => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); el.click(); }
        });
      });
      document.querySelectorAll('[data-modal-exempt]').forEach(el => {
        el.addEventListener('click', e => e.stopPropagation());
        el.addEventListener('keydown', e => e.stopPropagation());
      });
      document.querySelectorAll('[data-close-modal]').forEach(btn => {
        btn.addEventListener('click', () => {
          const modal = btn.closest('.modal');
          modal?.setAttribute('aria-hidden', 'true');
          document.body.style.overflow = '';
        });
      });
      document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', e => {
          if (e.target === modal) {
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
          }
        });
      });
      document.addEventListener('keydown', e => {
        if (e.key === 'Escape') {
          document.querySelectorAll('.modal[aria-hidden="false"]').forEach(m => m.setAttribute('aria-hidden','true'));
          document.body.style.overflow = '';
        }
      });
    })();
  </script>

  <!-- LMS auth (kept minimal; no auto-open) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getAuth, onAuthStateChanged, signInWithEmailAndPassword,
      signOut, setPersistence, browserLocalPersistence
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "YOUR_FIREBASE_API_KEY",
      authDomain: "YOUR_FIREBASE_AUTH_DOMAIN",
      projectId: "YOUR_FIREBASE_PROJECT_ID",
      appId: "YOUR_FIREBASE_APP_ID",
      storageBucket: "YOUR_FIREBASE_STORAGE_BUCKET",
      messagingSenderId: "YOUR_FIREBASE_MESSAGING_SENDER_ID",
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const loginLinks = document.querySelectorAll('[data-lms-login-open]');
    const modalShell = document.getElementById('lms-login-shell');
    const form = document.getElementById('lms-login-form');
    const emailEl = document.getElementById('lms-email');
    const pwdEl = document.getElementById('lms-password');
    const submitBtn = document.getElementById('lms-submit');
    const errorEl = document.getElementById('lms-error');
    const embedSection = document.getElementById('lms-embed-section');
    const signoutBtn = document.getElementById('lms-signout');
    const accountBtn = document.getElementById('lms-open-in-modal');

    const openModal = () => { modalShell.classList.remove('lms-hidden'); modalShell.setAttribute('aria-hidden','false'); };
    const closeModal = () => { modalShell.classList.add('lms-hidden'); modalShell.setAttribute('aria-hidden','true'); errorEl.textContent=''; form?.reset(); };
    const showEmbed = () => embedSection.classList.remove('lms-hidden');
    const hideEmbed = () => embedSection.classList.add('lms-hidden');

    document.addEventListener('DOMContentLoaded', () => {
      modalShell?.classList.add('lms-hidden');
      modalShell?.setAttribute('aria-hidden','true');
      embedSection?.classList.add('lms-hidden');
    });

    loginLinks.forEach(el => el.addEventListener('click', (e) => {
      e.preventDefault();
      if (auth.currentUser) {
        document.getElementById('lms-section')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } else { openModal(); setTimeout(() => emailEl?.focus(), 0); }
    }));
    document.querySelector('[data-lms-close]')?.addEventListener('click', closeModal);
    accountBtn?.addEventListener('click', () => openModal());

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      errorEl.textContent = '';
      submitBtn.disabled = true; submitBtn.textContent = 'Logging in…';
      try {
        await setPersistence(auth, browserLocalPersistence);
        await signInWithEmailAndPassword(auth, (emailEl.value||'').trim(), pwdEl.value||'');
        closeModal(); showEmbed();
      } catch (err) {
        const map = {
          'auth/invalid-email':'That email looks invalid.',
          'auth/missing-password':'Please enter your password.',
          'auth/user-not-found':'No account found with that email.',
          'auth/wrong-password':'Incorrect password.',
          'auth/too-many-requests':'Too many attempts. Try again later.',
          'auth/network-request-failed':'Network error. Check your connection.',
        };
        errorEl.textContent = map[err?.code] || 'Unable to sign in. Please try again.';
      } finally {
        submitBtn.disabled = false; submitBtn.textContent = 'Log in';
      }
    });

    onAuthStateChanged(auth, (user) => {
      if (user) { showEmbed(); loginLinks.forEach(el => el.textContent='Open LMS'); }
      else { hideEmbed(); loginLinks.forEach(el => el.textContent='Login to LMS'); }
    });

    signoutBtn?.addEventListener('click', async () => { await signOut(auth); hideEmbed(); });
  </script>

  <!-- LMS LOGIN MODAL -->
  <div id="lms-login-shell" class="lms-modal-backdrop lms-hidden" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="lms-login-title">
    <div class="lms-modal" role="document">
      <header id="lms-login-title">Login to LMS</header>
      <form id="lms-login-form" class="lms-body">
        <div class="lms-field">
          <label for="lms-email">Email</label>
          <input id="lms-email" name="email" type="email" autocomplete="email" required />
        </div>
        <div class="lms-field">
          <label for="lms-password">Password</label>
          <input id="lms-password" name="password" type="password" autocomplete="current-password" required />
        </div>
        <p id="lms-error" class="lms-error" aria-live="polite"></p>
      </form>
      <div class="lms-actions">
        <button type="button" class="lms-btn ghost" data-lms-close>Cancel</button>
        <button type="submit" form="lms-login-form" class="lms-btn primary" id="lms-submit">Log in</button>
      </div>
    </div>
  </div>
</body>
</html>
